<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Event Container</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    /* Styling for the event container */
    #eventsContainer{
        max-width: 800px;
        width: 60%;
        min-width: 300px;
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, 0%);
    }
    .event-container {
      display: none;
      margin-bottom: 20px;
      position: fixed;
      padding: 20px;
      background-color: #37B347;
      color:#fff;
      border-radius: 8px;
      box-shadow: 0 0.5rem 1.5rem 0.5rem rgba(0,0,0,.075);
      z-index:9999;
      opacity: 0.8;
      overflow: hidden;
    }

    .event-progressBar{
      position: absolute;
      left: 0;
      bottom: 0;
      height: 4px;
      background-color: #000000;
      opacity: 0.4;
      width: 100%;
    }
    .event-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .event-title {
      font-weight: bold;
    }
    .close-btn {
      cursor: pointer;
      color: black;
      font-weight: bold;
    }
    .event-body {
      font-size: 16px;
    }   
    .bod{
      width: 100%;
      height: 500px;
      background-color: red;
    }
  </style>
</head>
<body>
 <div class="bod">
  asdf
 </div>
<div id="eventsContainer">
  <!-- Event containers will be dynamically added here -->
</div>


<script>
  // Function to create event container
 
  function createEvent(title, description, hideDuration = 5000) {
      var eventContainer = $('<div>').addClass('event-container');
      var progressBar = $('<div>').addClass('event-progressBar');
      var eventHeader = $('<div>').addClass('event-header');
      var eventTitle = $('<div>').addClass('event-title').text(title);
      var closeButton = $('<span>').addClass('close-btn').text('X');
      var eventBody = $('<div>').addClass('event-body');


      eventBody.append($('<p>').text('Dear Valued Client,'));
      eventBody.append($('<p>').html(description));
      eventBody.append($('<p>').html('Warmest regards,<br>iCompliance Ltd Team'));

      eventHeader.append(eventTitle, closeButton);
      eventContainer.append(progressBar, eventHeader, eventBody);

      closeButton.on('click', function () {
          eventContainer.remove(); // Remove the event container on close button click
      });

      $('#eventsContainer').append(eventContainer); // Append the event container to the events container
      eventContainer.fadeIn('slow');

      var timeout; // Variable to hold timeout reference

      // Set a timeout to fade out and hide the event after 5 seconds (5000 milliseconds)
      timeout = setTimeout(function () {
          eventContainer.fadeOut('slow', function () {
              $(this).remove(); // Remove the event container after fade out
              progressBar.css('width', '100%');
          });
      }, hideDuration);

      // Pause the fade-out effect on hover
      eventContainer.on('mouseenter', function () {
          clearTimeout(timeout); // Clear the timeout to pause the fade-out effect
          $(this).css('opacity', '1');
          progressBar.stop(true, false);
          progressBar.css('width', '100%');

      }).on('mouseleave', function () {
          // Resume the fade-out effect
          $(this).css('opacity', '0.8');
          timeout = setTimeout(function () {
              eventContainer.fadeOut('slow', function () {
                  $(this).remove(); // Remove the event container after fade out
              });
          }, hideDuration); // Delay of 5 seconds after leaving hover to resume fade-out

          progressBar.animate({ width: '0%' }, hideDuration, 'linear');
      });


      // Show progress bar and animate its width
      progressBar.animate({ width: '0%' }, hideDuration, 'linear');
  }
  // Usage:
  $(document).ready(function() {
    var title ='ðŸŒŸ Cheers to New Beginnings! Happy New Year from iCompliance Ltd ðŸŒŸ';
    var desc = 'As the curtain falls on 2023, we extend a heartfelt thank you for being the driving force behind our shared triumphs. Your trust has fueled our success journey, and for that, we\'re truly grateful.'+
    'In the spirit of fresh starts, join us for a 2024 filled with innovation, collaboration, and shared victories. Exciting announcements and opportunities await!'+
    'Wishing you a year ahead full of prosperity, joy, and triumphs.'+
    ' Cheers to a stellar 2024!'
    // Call the function with title and description parameters
    createEvent(title, desc);
  });
</script>

</body>
</html>
